<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Injector: Injector Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Injector
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('class_injector.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_injector-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Injector Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This class takes a java file as an input and output a modified intermediate java file (injected code) then run the intermediate file to get txt file that contain which block executed.  
 <a href="class_injector.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ad407dfbe9e5b195321f25e0d27cb344c"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_injector.html#ad407dfbe9e5b195321f25e0d27cb344c">injector</a> (String path, String outputTxtPath)  throws Exception </td></tr>
<tr class="separator:ad407dfbe9e5b195321f25e0d27cb344c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63def0127d146ec8c56b487a0efcdb96"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_injector.html#a63def0127d146ec8c56b487a0efcdb96">htmlInjector</a> (String path)  throws Exception </td></tr>
<tr class="separator:a63def0127d146ec8c56b487a0efcdb96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a412d2066baa52a0aea5756054d15591a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_injector.html#a412d2066baa52a0aea5756054d15591a">run</a> (String command)  throws Exception </td></tr>
<tr class="separator:a412d2066baa52a0aea5756054d15591a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14273730ea96c47b685de5bf0a2f2651"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_injector.html#a14273730ea96c47b685de5bf0a2f2651">main</a> (String[] args)  throws Exception </td></tr>
<tr class="separator:a14273730ea96c47b685de5bf0a2f2651"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This class takes a java file as an input and output a modified intermediate java file (injected code) then run the intermediate file to get txt file that contain which block executed. </p>
<p >And generate HTML file color the input code to detect which block executed.</p>
<h3><a class="anchor" id="autotoc_md0"></a>
This class contains two functions:</h3>
<h4><a class="anchor" id="autotoc_md1"></a>
The injector() function</h4>
<ul>
<li>Deals with injecting the block of code that write the blocks that have been visited in the output text file </li>
</ul>
<h4><a class="anchor" id="autotoc_md2"></a>
The htmlInjector() function</h4>
<ul>
<li>This function is inject html code to color the input code. Green color for executed code, Red color for not executed code. </li>
</ul>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a63def0127d146ec8c56b487a0efcdb96" name="a63def0127d146ec8c56b487a0efcdb96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63def0127d146ec8c56b487a0efcdb96">&#9670;&nbsp;</a></span>htmlInjector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static String Injector.htmlInjector </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>input path for the file which we want to inject </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><b>r.getText()</b> HTML output code as a string.</dd></dl>
<p>This Function takes the input java file path and returns HTML output code which has been divided using dev tags to separate between blocks by ids to use them in marking which blocks have been executed.</p>
<p >This Function uses JavaLexer and JavaParser to extract tokens from the input code. it inserts an opening dev tag with a specific id attribute at the beginning of each block. The id attribute consists of the string "Block" concatenated with the block number. A dev tag will wrap the whole code with style attribute that makes the background green and font Arial. A closing dev tag will be inserted at the end of each block.</p>
<p >After the closing dev tag that wraps the whole code, a script tag will be added which contain the following:</p><ul>
<li><b>A variable</b> which equals the number of blocks.</li>
<li><b>A for loop</b> that loops over all the dev tags with a "Block" id and adds style attribute which will make the background color red.</li>
<li><b>A fetch() function</b> which get the output.txt file, converts the data in it to text(), make an array in which elements contain each line in the text file then, loop over the array and make the background color of each dev tag with an id that is in the array green. <dl class="section note"><dt>Note</dt><dd>Every Token has a way to handle with it</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>We will have HTML code string as output. This code will be written in a HTML file in the <a class="el" href="class_injector.html#a14273730ea96c47b685de5bf0a2f2651">main()</a> function. Then, This output HTML file will color blocks with green for executed code and red for not executed code depending on output.txt. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>Edit indentations </dd></dl>
</li>
</ul>

</div>
</div>
<a id="ad407dfbe9e5b195321f25e0d27cb344c" name="ad407dfbe9e5b195321f25e0d27cb344c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad407dfbe9e5b195321f25e0d27cb344c">&#9670;&nbsp;</a></span>injector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static String Injector.injector </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>outputTxtPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws Exception</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>input path for the file which we want to inject </td></tr>
    <tr><td class="paramname">outputTxtPath</td><td>output path for the text file which we will write into the executed blocks </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><b>r.getText()</b> java output code as a string.</dd></dl>
<p>This Function inserts file writer function with counter after some specified tokens like if, while, for, etc... to detect in runtime if this block is executed or not.</p>
<p >This Function uses JavaLexer and JavaParser to extract tokens from the input code, inserts package and imports at the beginning of the output file, creates a counter to count each block. Then, it will iterate over the whole tokens of input file until it gets one of the supported tokens. A file writer function which contains a string "Block" concatenated with the counter mentioned before, will be inserted after the supported token which function got.</p>
<p >After running this function and supplying the java input file path, we will have new java code with injected code in it as string. </p>
<h3><a class="anchor" id="autotoc_md3"></a>
Supported Tokens</h3>
<ul>
<li>if</li>
<li>while</li>
<li>for</li>
<li>do</li>
<li>try</li>
<li>catch</li>
<li>case</li>
<li>else</li>
<li>default</li>
<li>public</li>
<li>private</li>
<li>protected <dl class="section note"><dt>Note</dt><dd>Every Token has a way to handle with it</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>We will have a code string as output. This code will be written in a java file in the <a class="el" href="class_injector.html#a14273730ea96c47b685de5bf0a2f2651">main()</a> function. Then, This output java file will be executed in the <a class="el" href="class_injector.html#a412d2066baa52a0aea5756054d15591a">run()</a> function and write the executed blocks in the output text file. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd><a class="el" href="class_test.html" title="This class is for testing the Injector Class.">Test</a> more recursive tokens in supported tokens </dd></dl>
</li>
</ul>

</div>
</div>
<a id="a14273730ea96c47b685de5bf0a2f2651" name="a14273730ea96c47b685de5bf0a2f2651"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14273730ea96c47b685de5bf0a2f2651">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void Injector.main </td>
          <td>(</td>
          <td class="paramtype">String[]&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >The function generates the output java file and the output HTML file.</p>
<p >This Function takes the input file path from the user. Then, the function calls <a class="el" href="class_injector.html#ad407dfbe9e5b195321f25e0d27cb344c">injector()</a>, <a class="el" href="class_injector.html#a63def0127d146ec8c56b487a0efcdb96">htmlInjector()</a> with provided file path. store the string returned from each function in the output file which the function generates by doing some string operation on the input file path. After that it will call the <a class="el" href="class_injector.html#a412d2066baa52a0aea5756054d15591a">run()</a> function, passing the command which will be executed to run the output java file that will write the blocks which are executed in the output.txt file.</p>
<dl class="section post"><dt>Postcondition</dt><dd>After function run, The HTML file with javascript will read from the output.txt file and color the lines depending on block number in the output.txt file.</dd></dl>

</div>
</div>
<a id="a412d2066baa52a0aea5756054d15591a" name="a412d2066baa52a0aea5756054d15591a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a412d2066baa52a0aea5756054d15591a">&#9670;&nbsp;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int Injector.run </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td> throws Exception</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>String command to execute in powershell</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><b>1</b> If Succeed. </dd>
<dd>
<b>-1</b> If Failed.</dd></dl>
<p>This Function is used to execute any powershell command</p>
<p >This Function takes a string of a command as an input. Then, it makes a powershell process. After that, it passes this command to the powershell process object to be executed and print the result if Success. If there are errors, the command process will print the errors responses from the powershell.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_injector.html">Injector</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
